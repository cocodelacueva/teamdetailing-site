;(function(e){e.fullwidthAudioPlayer={version:"1.4.2",author:"Rafael Dery"};jQuery.fn.fullwidthAudioPlayer=function(t){function L(t){r=e(t);r.hide();N=t.id=="fap-popup";if(et()){if(n.hideOnMobile){return false}n.wrapperPosition="top";n.autoPlay=n.volume=n.playlist=false}b=Boolean(window.fapPopupWin);if(!n.autoPopup){b=true}y=!n.autoPlay;D();h=n.playlist?n.height+n.playlistHeight+n.offset:n.height;if(n.wrapperPosition=="popup"&&!N){T=true;if(!n.playlist){h=n.height}if(n.autoPopup&&!window.fapPopupWin){A(r.html(),n.autoPlay)}return false}var o='<div id="fap-wrapper" class="'+(n.wrapperPosition=="top"?"fap-wrapper-top":"fap-wrapper-bottom")+'" style="'+n.wrapperPosition+": 0; height: "+h+"px; background: "+n.wrapperColor+"; border-color: "+n.strokeColor+';"><div id="fap-main" style="color:'+n.mainColor+';"><div id="fap-wrapper-switcher" style="background: '+n.wrapperColor+"; border-color: "+n.strokeColor+'"></div><p id="fap-init-text">Creating Playlist...</p></div></div>';e("body").append(o);i=e("body").children("#fap-wrapper");s=i.children("#fap-main");if(N){i.addClass("fap-popup-skin")}if(et()){i.css({position:"absolute"})}if(N){s.css({marginLeft:10,marginRight:10})}else if(n.mainPosition=="center"){s.css({marginLeft:"auto",marginRight:"auto"})}else if(n.mainPosition=="right"){s.css({"float":"right",marginRight:10})}else{s.css({marginLeft:10})}n.wrapperPosition=="top"?s.children("#fap-wrapper-switcher").addClass("fap-bordered-bottom").css({bottom:-16,borderTop:"none"}):s.children("#fap-wrapper-switcher").addClass("fap-bordered-top").css({top:-16,borderBottom:"none"});n.opened?e.fullwidthAudioPlayer.setPlayerPosition("open",false):e.fullwidthAudioPlayer.setPlayerPosition("close",false);s.children("#fap-wrapper-switcher").click(function(){n.opened?e.fullwidthAudioPlayer.setPlayerPosition("close",true):e.fullwidthAudioPlayer.setPlayerPosition("open",true)});soundManager.onready(O);soundManager.ontimeout(function(e){alert("SM2 failed to start. Flash missing, blocked or security error? Status: "+e.error.type)})}function A(t,r){if(!window.fapPopupWin||window.fapPopupWin.closed){var i=980;var s=(window.screen.width-i)/2;var o=(window.screen.height-h)/2;window.fapPopupWin=window.open(n.popupUrl,"","menubar=no,toolbar=no,location=no,width="+i+",height="+h+",left="+s+",top="+o+"");if(window.fapPopupWin==null){alert("Pop-Up Music Player can not be opened. Your browser is blocking Pop-Ups. Please allow Pop-Ups for this site to use the Music Player.")}e(window.fapPopupWin).load(function(){e(".fap-enqueue-track").each(function(n,r){var i=e(r);t+=P(i)});n.autoPlay=r;window.fapPopupWin.initPlayer(n,t);b=true})}else{var u=e(t);e.fullwidthAudioPlayer.addTrack(u.attr("href"),u.attr("title"),u.data("meta")?e("body").find(u.data("meta")).html():"",u.attr("rel"),u.attr("target"),r)}}function O(){if(n.playlist){var t='<div class="clear"></div><div class="antiscroll-wrap"><div class="box"><div class="antiscroll-inner"><div id="fap-playlist-wrapper" class="box-inner"><ul id="fap-playlist"></ul></div><div class="clear"></div></div></div>';a=e(t)}if(n.xmlPath){e.ajax({type:"GET",url:n.xmlPath,dataType:"xml",cache:false,success:function(t){var r=e(t).find("playlists"),i=n.xmlPlaylist?i=n.xmlPlaylist:i=r.children("playlist:first").attr("id");M(r.children('playlist[id="'+i+'"]').children("track"));e(".fap-xml-playlist").each(function(t,n){var i=e(n);i.append("<h3>"+n.title+'</h3><ul class="fap-my-playlist"></ul>');r.children('playlist[id="'+n.id+'"]').children("track").each(function(t,r){var s=e(r);var o=s.attr("target")?'target="'+s.attr("target")+'"':"";var u=s.attr("rel")?'rel="'+s.attr("rel")+'"':"";var a=s.find("meta")?'data-meta="#'+n.id+"-"+t+'"':"";i.children("ul").append('<li><a href="'+s.attr("href")+'" title="'+s.attr("title")+'" '+o+" "+u+" "+a+">"+s.attr("title")+"</a></li>");i.append('<span id="'+n.id+"-"+t+'">'+s.find("meta").text()+"</span>")})})},error:function(){alert("XML file could not be loaded. Please check the XML path!")}})}else{M(r.children("a"))}}function M(t){r.bind("fap-tracks-stored",function(){++p;if(p<t.length){var i=t.eq(p);e.fullwidthAudioPlayer.addTrack(i.attr("href"),i.attr("title"),n.xmlPath?i.children("meta").text():r.find(i.data("meta")).html(),i.attr("rel"),i.attr("target"))}else{r.unbind("fap-tracks-stored");if(n.randomize){K()}_()}}).trigger("fap-tracks-stored")}function _(){s.children("p").remove();s.append('<div id="fap-meta-wrapper" class="clearfix"><img src="" id="fap-current-cover" style="width: '+n.coverSize[0]+"px; height:"+n.coverSize[1]+"px; border: 1px solid "+n.strokeColor+';" /><div id="fap-cover-replacement" style="width: '+n.coverSize[0]+"px; height:"+n.coverSize[1]+"px; border: 1px solid "+n.strokeColor+';"></div><p id="fap-current-title" style="color: '+n.mainColor+';"></p><p id="fap-current-meta" style="color: '+n.metaColor+';"></p></div>');u=s.children("#fap-meta-wrapper").css("height",n.height-10);W(document.getElementById("fap-cover-replacement"),n.coverSize[0],n.coverSize[1]);if(n.socials){u.append('<p id="fap-social-links"><a href="" target="_blank" style="color: '+n.metaColor+';">'+n.soundcloudText+'</a><a href="" target="_blank" style="color: '+n.metaColor+';">'+n.downloadText+'</a><a href="" target="_blank" style="color: '+n.metaColor+';">'+n.facebookText+'</a><a href="" target="_blank" style="color: '+n.metaColor+';">'+n.twitterText+"</a></p>")}o=s.append('<div id="fap-ui-wrapper"></div>').children("#fap-ui-wrapper").css("height",n.height);var t=o.append('<div id="fap-ui-nav"></div>').children("#fap-ui-nav");t.css("margin-top",n.height*.5-t.height()*.5);t.append('<a href="#" id="fap-previous" style="background-color: '+n.fillColor+';"></a>').children("#fap-previous").click(function(){e.fullwidthAudioPlayer.previous();return false});t.append('<a href="#" id="fap-play-pause" style="background-color: '+n.fillColor+';"></a>').children("#fap-play-pause").click(function(){e.fullwidthAudioPlayer.toggle();return false});t.append('<a href="#" id="fap-next" style="background-color: '+n.fillColor+';"></a>').children("#fap-next").click(function(){e.fullwidthAudioPlayer.next();return false});var i=o.children("div:first").length?o.width()-o.children("div:first").position().left+20:0;o.append('<div id="fap-time-bar" class="clearfix" style="width: '+d+"px; border: 1px solid "+n.fillColor+"; margin-top: "+(n.height*.5-3)+"px; color: "+n.metaColor+';"><div id="fap-loading-bar" style="background: '+n.fillColor+';"></div><div id="fap-progress-bar" style="background: '+n.mainColor+';"></div><span id="fap-current-time">00:00:00</span><span id="fap-total-time">00:00:00</span></div>');o.find("#fap-loading-bar, #fap-progress-bar").click(function(t){var n=(t.pageX-e(this).parent().offset().left)/d;if(E){l.setPosition(n)}else{l.setPosition(n*l.duration)}X(n)});if(n.volume){var c=n.playlist||n.shuffle?60:20;if(N){c=n.shuffle?60:20}o.append('<div id="fap-volume-bar" style="width: '+v+"px; background: "+n.fillColor+"; border: 1px solid "+n.fillColor+"; margin-top: "+(n.height*.5-3)+'px;"><div id="fap-volume-progress" style="background: '+n.mainColor+';"></div></div><div id="fap-volume-sign"></div>');o.children("#fap-volume-sign").css("margin-top",n.height*.5-o.children("#fap-volume-sign").height()*.5);o.find("#fap-volume-bar").click(function(t){var n=(t.pageX-e(this).offset().left)/v;e.fullwidthAudioPlayer.volume(n)})}if(n.playlist){n.wrapperPosition=="bottom"?s.append(a):s.prepend(a);var h=s.children(".antiscroll-wrap");h.find(".box, .box .antiscroll-inner").height(n.playlistHeight);f=h.antiscroll().data("antiscroll");s.find(".antiscroll-scrollbar").css("backgroundColor",n.mainColor);n.wrapperPosition=="top"?h.css({marginBottom:n.offset}):h.css({marginTop:n.offset});if(n.sortable){var p;a.find("#fap-playlist").sortable().bind("sortstart",function(e,t){p=a.find("#fap-playlist").children("li").index(t.item)});a.find("#fap-playlist").sortable().bind("sortupdate",function(e,t){var n=a.find("#fap-playlist").children("li").index(t.item);var r=k[p];var i=k[m].title;k.splice(p,1);k.splice(n,0,r);G(i)})}if(!N){o.append('<a href="#" id="fap-playlist-toggle" style="background-color:'+n.fillColor+"; margin-top: "+(n.height*.5-12)+'px;"></a>');o.children("#fap-playlist-toggle").click(function(){S?e.fullwidthAudioPlayer.setPlayerPosition("closePlaylist",true):e.fullwidthAudioPlayer.setPlayerPosition("openPlaylist",true);return false})}else{e.fullwidthAudioPlayer.setPlayerPosition("openPlaylist",false)}}if(n.shuffle){o.append('<a href="#" id="fap-playlist-shuffle" style="background-color:'+n.fillColor+"; margin-top: "+(n.height*.5-12)+'px;"></a>');o.children("#fap-playlist-shuffle").click(function(){K();return false})}o.find("a").hover(function(){e(this).css("backgroundColor",n.fillColorHover)},function(){e(this).css("backgroundColor",n.fillColor)});if(n.keyboard){e(document).keyup(function(t){switch(t.which){case 32:e.fullwidthAudioPlayer.toggle();break;case 39:e.fullwidthAudioPlayer.next();break;case 37:e.fullwidthAudioPlayer.previous();break;case 38:e.fullwidthAudioPlayer.volume(g/100+.05);break;case 40:e.fullwidthAudioPlayer.volume(g/100-.05);break}})}u.children("p").css("marginLeft",n.coverSize[0]+10);r.trigger("onFapReady");b=true;e(".fap-enqueue-track").each(function(t,n){var r=e(n);jQuery.fullwidthAudioPlayer.addTrack(r.attr("href"),r.attr("title"),e("body").find(r.data("meta")).html(),r.attr("rel"),r.attr("target"),false)});r.bind("fap-tracks-stored",function(e,t){if(x){F(t,x)}});F(0,n.autoPlay);n.autoPlay?r.trigger("onFapPlay"):r.trigger("onFapPause")}function D(){function t(){if(!b){return false}var t=e(this),n=true;if(t.data("enqueue")){n=t.data("enqueue")=="yes"?false:true}if(T){if(t.hasClass("fap-add-playlist")){var r=t.data("playlist"),i=jQuery('ul[data-playlist="'+r+'"]').first().children("li").find(".fap-single-track"),s=P(e(i.get(0)));if(i.size()==0){return false}A(s,n);i.splice(0,1);window.fapReady=window.fapPopupWin.addTrack!=undefined;var o=setInterval(function(){if(window.fapReady){clearInterval(o);i.each(function(e,t){A(t,false)})}},50)}else{var s=P(t);A(s,n)}}else{if(t.hasClass("fap-add-playlist")){var r=t.data("playlist"),i=jQuery('ul[data-playlist="'+r+'"]').first().children("li").find(".fap-single-track");if(i.size()==0){return false}i.each(function(t,r){var i=e(r);e.fullwidthAudioPlayer.addTrack(i.attr("href"),i.attr("title"),e("body").find(i.data("meta")).html(),i.attr("rel"),i.attr("target"),t==0&&n)})}else{e.fullwidthAudioPlayer.addTrack(t.attr("href"),t.attr("title"),e("body").find(t.data("meta")).html(),t.attr("rel"),t.attr("target"),n)}}return false}function n(){if(T&&window.fapPopupWin&&!window.fapPopupWin.closed){e(".fap-enqueue-track").each(function(e,t){A(t,false)})}}if(r.jquery>="1.7"){e("body").on("click",".fap-my-playlist li a, .fap-single-track",t);e("body").on("click",".fap-add-playlist",t)}else{e("body").delegate(".fap-my-playlist li a, .fap-single-track","click",t);e("body").delegate(".fap-add-playlist","click",t)}setTimeout(n,201)}function P(t){var n='<a href="'+t.attr("href")+'" title="'+(t.attr("title")?t.attr("title"):"")+'" target="'+(t.attr("target")?t.attr("target"):"")+'" rel="'+(t.attr("rel")?t.attr("rel"):"")+'" data-meta="'+(t.data("meta")?t.data("meta"):"")+'"></a>';if(t.data("meta")){var r=e("body").find(t.data("meta")).html()?e("body").find(t.data("meta")).html():"";n+='<span id="'+t.data("meta").substring(1)+'">'+r+"</span>"}return n}function H(t){e.getJSON(B(t,C),function(n){var i=0,s=0;if(n.tracks){for(var o=0;o<n.tracks.length;++o){s=j(n.tracks[o]);i=s<i?s:i;if(o==0){i=s}}}else if(n.duration){n.permalink_url=t;i=j(n)}else if(n.username){if(/favorites/.test(t)){H(n.uri+"/favorites")}else{H(n.uri+"/tracks")}return false}else if(e.isArray(n)){for(var o=0;o<n.length;++o){s=j(n[o]);i=s<i?s:i;if(o==0){i=s}}}r.trigger("onFapTracksAdded",[k]);r.trigger("fap-tracks-stored",[i])})}function B(e,t){var n=false;var r=n?"sandbox-soundcloud.com":"soundcloud.com";return(/api\./.test(e)?e+"?":"http://api."+r+"/resolve?url="+e+"&")+"format=json&consumer_key="+t+"&callback=?"}function j(e){var t=k.length;for(var n=0;n<k.length;++n){if(e.title==k[n].title){t=n;return t;break}}k.push(e);z(e.artwork_url,e.title);return t}function F(t,i){if(k.length<=0){e.fullwidthAudioPlayer.clear();return false}if(E&&!w){return false}if(t==m){return false}else if(t<0){m=k.length-1}else if(t==k.length){m=0}else{m=t}y=!i;var s=RegExp("http://soundcloud").test(k[m].permalink_url);if(s&&!w){e("body").fapScPlayer({apiKey:C,autoPlay:i});e(document).bind("fapScPlayer:onAudioReady",function(e){w=true;l.setVolume(g)})}if(e.fapScPlayer.html5()){w=true}o.find("#fap-progress-bar").width(0);o.find("#fap-total-time, #fap-current-time").text("00:00:00");u.children("#fap-current-cover").attr("src",k[m].artwork_url);u.children("#fap-current-title").html(k[m].title);u.children("#fap-current-meta").html(s?k[m].genre:k[m].meta);if(!k[m].artwork_url){u.children("#fap-current-cover").hide();u.children("#fap-cover-replacement").show()}else{u.children("#fap-current-cover").show();u.children("#fap-cover-replacement").hide()}if(k[m].permalink_url){u.children("#fap-social-links").children("a").show();var f="http://www.facebook.com/sharer.php?u="+encodeURIComponent(k[m].permalink_url)+"&t="+encodeURIComponent(k[m].title)+"";var c="http://twitter.com/share?url="+encodeURIComponent(k[m].permalink_url)+"&text="+encodeURIComponent(k[m].title)+"";u.find("#fap-social-links a:eq(0)").attr("href",k[m].permalink_url);u.find("#fap-social-links a:eq(1)").attr("href",k[m].permalink_url+"/download");u.find("#fap-social-links a:eq(2)").attr("href",f);u.find("#fap-social-links a:eq(3)").attr("href",c)}else{u.children("#fap-social-links").children("a").hide()}if(a){a.find("#fap-playlist li").css("background","none");a.find("#fap-playlist li").eq(m).css("background",n.activeTrackColor)}if(i){o.find("#fap-play-pause").removeClass("fap-play").addClass("fap-pause")}else{o.find("#fap-play-pause").removeClass("fap-pause").addClass("fap-play")}if(l){l.destruct()}if(s){if(!E){o.find("#fap-loading-bar").width("100%")}u.children("#fap-social-links").children("a:eq(0)").show();if(k[m].downloadable){u.children("#fap-social-links").children("a:eq(1)").show()}else{u.children("#fap-social-links").children("a:eq(1)").hide()}E=true;l=e.fapScPlayer;l.setVolume(g);l.load(k[m],i);l.defaults.whileloading=function(e){if(e<0)e=0;if(e>100)e=100;o.find("#fap-loading-bar").width(e+"%")};l.defaults.whileplaying=function(e,t){V(e,k[m].duration)};l.defaults.onfinish=R}else{u.children("#fap-social-links").children("a:eq(0), a:eq(1)").hide();E=false;l=soundManager.createSound({id:"fap_sound",url:k[m].stream_url,autoPlay:i,autoLoad:n.autoLoad,volume:g,whileloading:I,whileplaying:q,onfinish:R,onload:U})}r.trigger("onFapTrackSelect",[k[m]])}function I(){o.find("#fap-loading-bar").width(this.bytesLoaded/this.bytesTotal*d)}function q(){V(this.position,this.duration)}function R(){if(n.playNextWhenFinished){e.fullwidthAudioPlayer.next()}else{e.fullwidthAudioPlayer.pause();l.setPosition(0);X(0)}}function U(e){if(!e){if(window.console&&window.console.log){console.log("MP3 file could not be loaded! Please check the URL: "+this.url)}}}function z(t,i){function l(){var t=a.find("#fap-playlist li").index(e(this).parent());F(t,true)}function c(){var t=e(this),r=t.parent().parent().children("li").index(t.parent());k.splice(r,1);t.parent().remove();if(r==m){m--;r=r==k.length?0:r;F(r,y?false:true)}else if(r<m){m--}if(f){f.refresh();s.find(".antiscroll-scrollbar").css("backgroundColor",n.mainColor)}}if(!n.playlist){return false}var o=t?'<img src="'+t+'" style="border: 1px solid '+n.strokeColor+';" />':'<div class="fap-cover-replace-small" style="background: '+n.wrapperColor+"; border: 1px solid "+n.strokeColor+';"></div>';a.find("#fap-playlist").append('<li class="clearfix">'+o+"<span>"+i+'</span><div class="fap-remove-track">×</div></li>');var u=a.find("#fap-playlist li").last().css({marginBottom:5,height:22});if(navigator.appVersion.indexOf("MSIE 7.")==-1){if(!t){W(u.children(".fap-cover-replace-small").get(0),20,20)}}if(r.jquery>="1.7"){u.on("click","span",l);u.on("click",".fap-remove-track",c)}else{u.delegate("span","click",l);u.delegate(".fap-remove-track","click",c)}if(f){f.refresh();s.find(".antiscroll-scrollbar").css("backgroundColor",n.mainColor)}}function W(t,r,i){e(t).append('<span style="line-height: '+i+"px; color: "+n.metaColor+';">…</span>')}function X(e){o.find("#fap-progress-bar").width(e*d)}function V(e,t){var n=J(e/1e3);if(c!=n){o.find("#fap-current-time").text(n);o.find("#fap-total-time").text(J(t/1e3));X(e/t)}c=n}function J(e){e=Math.abs(e);var t=new Array;t[0]=Math.floor(e/3600%24);t[1]=Math.floor(e/60%60);t[2]=Math.floor(e%60);var n=true;var r=-1;for(var i=0;i<t.length;i++){if(t[i]<10)t[i]="0"+t[i];if(t[i]=="00"&&i<t.length-2&&!n)r=i;else n=true}t.splice(0,r+1);return t.join(":")}function K(){if(a){a.find("#fap-playlist").empty()}if(m!=-1){var e=k[m].title;k.shuffle();G(e);for(var t=0;t<k.length;++t){z(k[t].artwork_url,k[t].title)}s.find("#fap-playlist-wrapper #fap-playlist").find("li").eq(m).css("backgroundColor",n.fillColor);s.find("#fap-playlist-wrapper").scrollTop(0)}else{k.shuffle();for(var t=0;t<k.length;++t){z(k[t].artwork_url,k[t].title)}}}function Q(){var e,t;for(var n=0;n<this.length;n++){t=Math.floor(Math.random()*this.length);e=this[n];this[n]=this[t];this[t]=e}}function G(e){for(var t=0;t<k.length;++t){if(k[t].title==e){m=t}}}function Y(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var n="";var r,i,s;var o,u,a,f;var l=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(l<e.length){o=t.indexOf(e.charAt(l++));u=t.indexOf(e.charAt(l++));a=t.indexOf(e.charAt(l++));f=t.indexOf(e.charAt(l++));r=o<<2|u>>4;i=(u&15)<<4|a>>2;s=(a&3)<<6|f;n=n+String.fromCharCode(r);if(a!=64){n=n+String.fromCharCode(i)}if(f!=64){n=n+String.fromCharCode(s)}}n=Z(n);return n}function Z(e){var t="";var n=0;var r=c1=c2=0;while(n<e.length){r=e.charCodeAt(n);if(r<128){t+=String.fromCharCode(r);n++}else if(r>191&&r<224){c2=e.charCodeAt(n+1);t+=String.fromCharCode((r&31)<<6|c2&63);n+=2}else{c2=e.charCodeAt(n+1);c3=e.charCodeAt(n+2);t+=String.fromCharCode((r&15)<<12|(c2&63)<<6|c3&63);n+=3}}return t}function et(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)}var n=e.extend({},e.fn.fullwidthAudioPlayer.defaults,t);var r,i,s,o,u,a=null,f,l,c,h=0,p=-1,d=180,v=50,m=-1,g=100,y,b,w=false,E=false,S=false,x=false,T=false,N=false,C="d2be7a47322c293cdaffc039a26e05d1";var k=new Array;e.fullwidthAudioPlayer.play=function(){if(k.length>0){if(l.playState){l.resume()}else{l.play()}o.find("#fap-play-pause").removeClass("fap-play").addClass("fap-pause");y=false;r.trigger("onFapPlay")}};e.fullwidthAudioPlayer.pause=function(){if(k.length>0){l.pause();o.find("#fap-play-pause").removeClass("fap-pause").addClass("fap-play");y=true;r.trigger("onFapPause")}};e.fullwidthAudioPlayer.toggle=function(){if(y){e.fullwidthAudioPlayer.play()}else{e.fullwidthAudioPlayer.pause()}};e.fullwidthAudioPlayer.previous=function(){if(k.length>0){F(m-1,true)}};e.fullwidthAudioPlayer.next=function(){if(k.length>0){F(m+1,true)}};e.fullwidthAudioPlayer.volume=function(e){if(k.length>0){if(e<0)e=0;if(e>1)e=1;g=e*100;if(l){l.setVolume(g)}o.find("#fap-volume-progress").width(e*v)}};e.fullwidthAudioPlayer.addTrack=function(t,i,s,o,u,a){if(t==null||t==""){return false}if(i===undefined){i=""}if(s===undefined){s=""}if(o===undefined){o=""}if(u===undefined){u=""}if(a===undefined){a=false}if(T&&window.fapPopupWin&&!window.fapPopupWin.closed){window.fapPopupWin.addTrack(t,i,s,o,u,a);window.fapPopupWin.focus();return false}if(n.base64){t=Y(t)}x=a;if(RegExp("http://soundcloud").test(t)){if(!C){alert("Sorry. You need to set a soundcloud API key first. Please read the documentation how to get and set an API key!");return false}H(t)}else{var f=j({stream_url:t,title:i,meta:s,artwork_url:o,permalink_url:u});r.trigger("onFapTracksAdded",[k]);r.trigger("fap-tracks-stored",[f])}if(!n.opened&&a&&!N){e.fullwidthAudioPlayer.setPlayerPosition("open",true)}};e.fullwidthAudioPlayer.setPlayerPosition=function(e,t){if(i.is(":animated")){return false}if(e=="open"){s.children("#fap-wrapper-switcher").html("×");if(n.wrapperPosition=="top"){i.animate({top:-(h-n.height)},t?300:0);jQuery("#container-wrapper").animate({"margin-top":n.height+2+"px"},t?300:0)}else{i.animate({bottom:-(h-n.height)},t?300:0);jQuery("#footer-wrapper").animate({"margin-bottom":n.height+2+"px"},t?300:0)}n.opened=true}else if(e=="close"){s.children("#fap-wrapper-switcher").html("+");if(n.wrapperPosition=="top"){i.animate({top:-h-1},t?300:0);jQuery("#container-wrapper").animate({"margin-top":"0px"},t?300:0)}else{i.animate({bottom:-h-1},t?300:0);jQuery("#footer-wrapper").animate({"margin-bottom":"0px"},t?300:0)}n.opened=S=false}else if(e=="openPlaylist"){if(n.wrapperPosition=="top"){i.animate({top:0},300)}else{i.animate({bottom:0},300)}S=true}else if(e=="closePlaylist"){if(n.wrapperPosition=="top"){i.animate({top:-(h-n.height)},300)}else{i.animate({bottom:-(h-n.height)},300)}S=false}};e.fullwidthAudioPlayer.clear=function(){u.children("#fap-current-cover").hide();u.children("#fap-cover-replacement").show();u.children("#fap-current-title, #fap-current-meta").html("");u.children("#fap-social-links").children("a").attr("href","").hide();o.find("#fap-progress-bar, #fap-loading-bar").width(0);o.find("#fap-current-time, #fap-total-time").text("00:00:00");o.find("#fap-play-pause").removeClass("fap-pause").addClass("fap-play");y=true;m=-1;if(a){a.find("#fap-playlist").empty()}k=[];if(l){l.destruct()}if(f){f.refresh();s.find(".antiscroll-scrollbar").css("backgroundColor",n.mainColor)}r.trigger("onFapClear")};e.fullwidthAudioPlayer.popUp=function(){if(T){if(!window.fapPopupWin||window.fapPopupWin.closed){A("",false)}else{window.fapPopupWin.focus()}}};Array.prototype.shuffle=Q;return this.each(function(){L(this)})};e.fn.fullwidthAudioPlayer.defaults={wrapperPosition:"bottom",mainPosition:"center",wrapperColor:"#f0f0f0",mainColor:"#3c3c3c",fillColor:"#e3e3e3",metaColor:"#666666",strokeColor:"#e0e0e0",fillColorHover:"#d1d1d1",activeTrackColor:"#E8E8E8",twitterText:"Share on Twitter",facebookText:"Share on Facebook",soundcloudText:"Check on Souncloud",downloadText:"Download",popupUrl:"popup.html",height:70,playlistHeight:210,coverSize:[50,50],offset:20,opened:true,volume:true,playlist:true,autoLoad:true,autoPlay:false,playNextWhenFinished:true,keyboard:true,socials:true,autoPopup:false,randomize:false,shuffle:true,sortable:false,base64:false,xmlPath:"",xmlPlaylist:"",hideOnMobile:false}})(jQuery);(function(){var e=/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent);var t=window.soundcloud={version:"0.1",debug:false,_listeners:[],_redispatch:function(e,t,n){var r,i=this._listeners[e]||[],s="soundcloud:"+e;try{r=this.getPlayer(t)}catch(o){if(this.debug&&window.console){console.error("unable to dispatch widget event "+e+" for the widget id "+t,n,o)}return}if(window.jQuery){jQuery(r).trigger(s,[n])}else if(window.Prototype){$(r).fire(s,n)}else{}for(var u=0,a=i.length;u<a;u+=1){i[u].apply(r,[r,n])}if(this.debug&&window.console){console.log(s,e,t,n)}},addEventListener:function(e,t){if(!this._listeners[e]){this._listeners[e]=[]}this._listeners[e].push(t)},removeEventListener:function(e,t){var n=this._listeners[e]||[];for(var r=0,i=n.length;r<i;r+=1){if(n[r]===t){n.splice(r,1)}}},getPlayer:function(t){var n;try{if(!t){throw"The SoundCloud Widget DOM object needs an id atribute, please refer to SoundCloud Widget API documentation."}n=e?window[t]:document[t];if(n){if(n.api_getFlashId){return n}else{throw"The SoundCloud Widget External Interface is not accessible. Check that allowscriptaccess is set to 'always' in embed code"}}else{throw"The SoundCloud Widget with an id "+t+" couldn't be found"}}catch(r){if(console&&console.error){console.error(r)}throw r}},onPlayerReady:function(e,t){this._redispatch("onPlayerReady",e,t)},onMediaStart:function(e,t){this._redispatch("onMediaStart",e,t)},onMediaEnd:function(e,t){this._redispatch("onMediaEnd",e,t)},onMediaPlay:function(e,t){this._redispatch("onMediaPlay",e,t)},onMediaPause:function(e,t){this._redispatch("onMediaPause",e,t)},onMediaBuffering:function(e,t){this._redispatch("onMediaBuffering",e,t)},onMediaSeek:function(e,t){this._redispatch("onMediaSeek",e,t)},onMediaDoneBuffering:function(e,t){this._redispatch("onMediaDoneBuffering",e,t)},onPlayerError:function(e,t){this._redispatch("onPlayerError",e,t)}}})();(function(e){var t=true,n=false,r=e(document),i=function(e){try{if(t&&window.console&&window.console.log){window.console.log.apply(window.console,arguments)}}catch(n){}},s=n?"sandbox-soundcloud.com":"soundcloud.com";var o=function(){var t=function(){var e=false;try{var t=new Audio;e=t.canPlayType&&/maybe|probably/.test(t.canPlayType("audio/mpeg"));e=e&&/iPad|iphone|mobile|pre\//i.test(navigator.userAgent)}catch(n){}return e}();callbacks={onReady:function(){r.trigger("fapScPlayer:onAudioReady")},onPlay:function(){r.trigger("fapScPlayer:onMediaPlay")},onPause:function(){r.trigger("fapScPlayer:onMediaPause")},onEnd:function(){r.trigger("fapScPlayer:onMediaEnd")},onBuffer:function(e){r.trigger({type:"fapScPlayer:onMediaBuffering",percent:e})}};var n=function(){var t=new Audio,n=function(e){var t=e.target,n=(t.buffered.length&&t.buffered.end(0))/t.duration*100;callbacks.onBuffer(n);if(t.currentTime===t.duration){callbacks.onEnd()}},r=function(e){var t=e.target,n=(t.buffered.length&&t.buffered.end(0))/t.duration*100;callbacks.onBuffer(n)};e('<div class="sc-player-engine-container"></div>').appendTo(document.body).append(t);t.addEventListener("play",callbacks.onPlay,false);t.addEventListener("pause",callbacks.onPause,false);t.addEventListener("ended",callbacks.onEnd,false);t.addEventListener("timeupdate",n,false);t.addEventListener("progress",r,false);return{load:function(e,n){t.pause();t.src=e.stream_url+"?consumer_key="+n;t.load();t.play()},play:function(){t.play()},pause:function(){t.pause()},stop:function(){if(t.currentTime){t.currentTime=0}t.pause()},seek:function(e){t.currentTime=t.duration*e;t.play()},getDuration:function(){return t.duration*1e3},getPosition:function(){return t.currentTime*1e3},setVolume:function(e){if(t){t.volume=e/100}},html5:true}};var i=function(){var t="fapScPlayerEngine",n,r=function(e){var n="http://player."+s+"/player.swf?url="+e+"&enable_api=true&player_type=engine&object_id="+t;if(/MSIE (\d+\.\d+);/.test(navigator.userAgent)){return'<object height="100%" width="100%" id="'+t+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" data="'+n+'">'+'<param name="movie" value="'+n+'" />'+'<param name="allowscriptaccess" value="always" />'+"</object>"}else{return'<object height="100%" width="100%" id="'+t+'">'+'<embed allowscriptaccess="always" height="100%" width="100%" src="'+n+'" type="application/x-shockwave-flash" name="'+t+'" />'+"</object>"}};soundcloud.addEventListener("onPlayerReady",function(e,r){n=soundcloud.getPlayer(t);callbacks.onReady()});soundcloud.addEventListener("onMediaEnd",callbacks.onEnd);soundcloud.addEventListener("onMediaBuffering",function(e,t){callbacks.onBuffer(t.percent)});soundcloud.addEventListener("onMediaPlay",callbacks.onPlay);soundcloud.addEventListener("onMediaPause",callbacks.onPause);return{load:function(t){var i=t.permalink_url;if(n){n.api_load(i)}else{e('<div class="sc-player-engine-container"></div>').appendTo(document.body).html(r(i))}},play:function(){n&&n.api_play()},pause:function(){n&&n.api_pause()},stop:function(){n&&n.api_stop()},seek:function(e){n&&n.api_seekTo(n.api_getTrackDuration()*e)},getDuration:function(){return n&&n.api_getTrackDuration&&n.api_getTrackDuration()*1e3},getPosition:function(){return n&&n.api_getTrackPosition&&n.api_getTrackPosition()*1e3},setVolume:function(e){if(n&&n.api_setVolume){n.api_setVolume(e)}},html5:false}};return t?n():i()}();var u,a,f=false,l=false,c;e.fapScPlayer=function(t){var n=e.extend({},e.fapScPlayer.defaults,t);u=n.apiKey;a=n.autoPlay};e.fapScPlayer.html5=function(){return o.html5};e.fapScPlayer.load=function(t,n){l=!n;o.stop();o.load(t,u);e.fapScPlayer.duration=t.duration};e.fapScPlayer.play=function(){l=false;o.play()};e.fapScPlayer.pause=function(){l=true;o.pause()};e.fapScPlayer.stop=function(){l=true;o.stop()};e.fapScPlayer.setPosition=function(e){o.seek(e)};e.fapScPlayer.setVolume=function(e){o.setVolume(e)};e.fapScPlayer.destruct=function(){l=true;o.pause();o.stop()};r.bind("fapScPlayer:onAudioReady",function(e){o.html5?i("Soundcloud Player HTML5: audio engine is ready"):i("Soundcloud Player Flash: audio engine is ready");if(f||!l){o.play()}else{if(a){o.play()}else{o.pause()}}f=true}).bind("fapScPlayer:onMediaPlay",function(t){clearInterval(c);if(l){o.stop();return false}c=setInterval(function(){var t=o.getDuration(),n=o.getPosition();e.fapScPlayer.defaults.whileplaying(n,t)},500)}).bind("fapScPlayer:onMediaPause",function(e){clearInterval(c);c=null}).bind("fapScPlayer:onVolumeChange",function(e){}).bind("fapScPlayer:onMediaEnd",function(t){e.fapScPlayer.defaults.onfinish()}).bind("fapScPlayer:onMediaBuffering",function(t){e.fapScPlayer.defaults.whileloading(t.percent+1)});e.fn.fapScPlayer=function(t){this.each(function(){e.fapScPlayer(t,this)});return this};e.fapScPlayer.defaults=e.fn.fapScPlayer.defaults={whileloading:function(){},whileplaying:function(){},onfinish:function(){},apiKey:"LFSDttxBaGVSYZfSitrA",autoPlay:true}})(jQuery);(function(e){function t(t,n){this.el=e(t);this.options=n||{};this.x=false!==this.options.x;this.y=false!==this.options.y;this.padding=undefined==this.options.padding?2:this.options.padding;this.inner=this.el.find(".antiscroll-inner");this.inner.css({width:"+="+s(),height:"+="+s()});this.refresh()}function n(t){this.pane=t;this.pane.el.append(this.el);this.innerEl=this.pane.inner.get(0);this.dragging=false;this.enter=false;this.shown=false;this.pane.el.mouseenter(e.proxy(this,"mouseenter"));this.pane.el.mouseleave(e.proxy(this,"mouseleave"));this.el.mousedown(e.proxy(this,"mousedown"));this.pane.inner.scroll(e.proxy(this,"scroll"));this.pane.inner.bind("mousewheel",e.proxy(this,"mousewheel"));var n=this.pane.options.initialDisplay;if(n!==false){this.show();this.hiding=setTimeout(e.proxy(this,"hide"),parseInt(n,10)||3e3)}}function r(e,t){function n(){}n.prototype=t.prototype;e.prototype=new n}function s(){if(i===undefined){var t=e('<div style="width:50px;height:50px;overflow:hidden;'+'position:absolute;top:-200px;left:-200px;"><div style="height:100px;">'+"</div>");e("body").append(t);var n=e("div",t).innerWidth();t.css("overflow-y","scroll");var r=e("div",t).innerWidth();e(t).remove();i=n-r}return i}e.fn.antiscroll=function(t){return this.each(function(){if(e(this).data("antiscroll")){e(this).data("antiscroll").destroy()}e(this).data("antiscroll",new e.Antiscroll(this,t))})};e.Antiscroll=t;t.prototype.refresh=function(){var e=this.inner.get(0).scrollWidth>this.el.width(),t=this.inner.get(0).scrollHeight>this.el.height();if(!this.horizontal&&e&&this.x){this.horizontal=new n.Horizontal(this)}else if(this.horizontal&&!e){this.horizontal.destroy();this.horizontal=null}if(!this.vertical&&t&&this.y){this.vertical=new n.Vertical(this)}else if(this.vertical&&!t){this.vertical.destroy();this.vertical=null}};t.prototype.destroy=function(){if(this.horizontal){this.horizontal.destroy()}if(this.vertical){this.vertical.destroy()}return this};t.prototype.rebuild=function(){this.destroy();this.inner.attr("style","");t.call(this,this.el,this.options);return this};n.prototype.destroy=function(){this.el.remove();return this};n.prototype.mouseenter=function(){this.enter=true;this.show()};n.prototype.mouseleave=function(){this.enter=false;if(!this.dragging){this.hide()}};n.prototype.scroll=function(){if(!this.shown){this.show();if(!this.enter&&!this.dragging){this.hiding=setTimeout(e.proxy(this,"hide"),1500)}}this.update()};n.prototype.mousedown=function(t){t.preventDefault();this.dragging=true;this.startPageY=t.pageY-parseInt(this.el.css("top"),10);this.startPageX=t.pageX-parseInt(this.el.css("left"),10);document.onselectstart=function(){return false};var n=this.pane,r=e.proxy(this,"mousemove"),i=this;e(document).mousemove(r).mouseup(function(){i.dragging=false;document.onselectstart=null;e(document).unbind("mousemove",r);if(!i.enter){i.hide()}})};n.prototype.show=function(e){if(!this.shown){this.update();this.el.addClass("antiscroll-scrollbar-shown");if(this.hiding){clearTimeout(this.hiding);this.hiding=null}this.shown=true}};n.prototype.hide=function(){if(this.shown){this.el.removeClass("antiscroll-scrollbar-shown");this.shown=false}};n.Horizontal=function(t){this.el=e('<div class="antiscroll-scrollbar antiscroll-scrollbar-horizontal">');n.call(this,t)};r(n.Horizontal,n);n.Horizontal.prototype.update=function(){var e=this.pane.el.width(),t=e-this.pane.padding*2,n=this.pane.inner.get(0);this.el.css("width",t*e/n.scrollWidth).css("left",t*n.scrollLeft/n.scrollWidth)};n.Horizontal.prototype.mousemove=function(e){var t=this.pane.el.width()-this.pane.padding*2,n=e.pageX-this.startPageX,r=this.el.width(),i=this.pane.inner.get(0);var s=Math.min(Math.max(n,0),t-r);i.scrollLeft=(i.scrollWidth-this.pane.el.width())*s/(t-r)};n.Horizontal.prototype.mousewheel=function(e,t,n,r){if(n<0&&0==this.pane.inner.get(0).scrollLeft||n>0&&this.innerEl.scrollLeft+this.pane.el.width()==this.innerEl.scrollWidth){e.preventDefault();return false}};n.Vertical=function(t){this.el=e('<div class="antiscroll-scrollbar antiscroll-scrollbar-vertical">');n.call(this,t)};r(n.Vertical,n);n.Vertical.prototype.update=function(){var e=this.pane.el.height(),t=e-this.pane.padding*2,n=this.innerEl;this.el.css("height",t*e/n.scrollHeight).css("top",t*n.scrollTop/n.scrollHeight)};n.Vertical.prototype.mousemove=function(e){var t=this.pane.el.height(),n=t-this.pane.padding*2,r=e.pageY-this.startPageY,i=this.el.height(),s=this.innerEl;var o=Math.min(Math.max(r,0),n-i);s.scrollTop=(s.scrollHeight-t)*o/(n-i)};n.Vertical.prototype.mousewheel=function(e,t,n,r){if(r>0&&0==this.innerEl.scrollTop||r<0&&this.innerEl.scrollTop+this.pane.el.height()==this.innerEl.scrollHeight){e.preventDefault();return false}};var i;})(jQuery);